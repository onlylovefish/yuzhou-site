<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.23" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.151" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" type="image/png" href="zhishiku.png"><title>调试工具-whistle | 渔舟小站</title><meta name="description" content="渔舟的站点"><link rel="preload" href="/yuzhou-site/assets/style-BjADDtjt.css" as="style"><link rel="stylesheet" href="/yuzhou-site/assets/style-BjADDtjt.css"><link rel="modulepreload" href="/yuzhou-site/assets/app-Bg3bfEUT.js"><link rel="modulepreload" href="/yuzhou-site/assets/index.html-V1v2XZXU.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-2cd99c61><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-04aa07a2></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-04aa07a2> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-2cd99c61 data-v-cb84354d><div class="vp-navbar" vp-navbar data-v-cb84354d data-v-c8291bb3><div class="wrapper" data-v-c8291bb3><div class="container" data-v-c8291bb3><div class="title" data-v-c8291bb3><div class="vp-navbar-title" data-v-c8291bb3 data-v-aa9555db><a class="vp-link no-icon link title" href="/yuzhou-site/" data-v-aa9555db data-v-230c3d54><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/yuzhou-site/zhishiku.png" alt data-v-a653499d><!--]--><!--[--><img class="vp-image light logo" style="" src="/yuzhou-site/zhishiku.png" alt data-v-a653499d><!--]--><!--]--><!--]--><span data-v-aa9555db>渔舟小站</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-c8291bb3><div class="content-body" data-v-c8291bb3><!--[--><!--]--><div class="vp-navbar-search search" data-v-c8291bb3><div class="search-wrapper" data-v-fbf9c935><!----><div id="local-search" data-v-fbf9c935><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-fbf9c935><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-c8291bb3 data-v-a9676556><span id="main-nav-aria-label" class="visually-hidden" data-v-a9676556>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/yuzhou-site/aboutme/" tabindex="0" data-v-a9676556 data-v-ae9c43c6 data-v-230c3d54><!--[--><!----><span data-v-ae9c43c6>关于我👩‍💼</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/yuzhou-site/baseKnowledge/" tabindex="0" data-v-a9676556 data-v-ae9c43c6 data-v-230c3d54><!--[--><!----><span data-v-ae9c43c6>基础知识🧀</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/yuzhou-site/sourceCode/" tabindex="0" data-v-a9676556 data-v-ae9c43c6 data-v-230c3d54><!--[--><!----><span data-v-ae9c43c6>源码学习📚</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/yuzhou-site/practice/" tabindex="0" data-v-a9676556 data-v-ae9c43c6 data-v-230c3d54><!--[--><!----><span data-v-ae9c43c6>工作实践💻</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/yuzhou-site/article/7j07ihxk/" tabindex="0" data-v-a9676556 data-v-ae9c43c6 data-v-230c3d54><!--[--><!----><span data-v-ae9c43c6>leetCode💡</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/yuzhou-site/read/" tabindex="0" data-v-a9676556 data-v-ae9c43c6 data-v-230c3d54><!--[--><!----><span data-v-ae9c43c6>开卷有益📖</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/yuzhou-site/blog/archives/" tabindex="0" data-v-a9676556 data-v-ae9c43c6 data-v-230c3d54><!--[--><!----><span data-v-ae9c43c6>归档</span><!----><!--]--><!----></a><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-c8291bb3 data-v-49f87829><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-49f87829 data-v-6862ca98 data-v-1b8b485c><span class="check" data-v-1b8b485c><span class="icon" data-v-1b8b485c><!--[--><span class="vpi-sun sun" data-v-6862ca98></span><span class="vpi-moon moon" data-v-6862ca98></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-c8291bb3 data-v-3a832deb data-v-feba6c91><!--[--><a class="vp-social-link no-icon" href="https://github.com/onlylovefish/yuzhou-site" aria-label="github" target="_blank" rel="noopener" data-v-feba6c91 data-v-344f47ea><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-c8291bb3 data-v-f8d57d5d data-v-10af6d48><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-10af6d48><span class="vpi-more-horizontal icon" data-v-10af6d48></span></button><div class="menu" data-v-10af6d48><div class="vp-menu" data-v-10af6d48 data-v-de5eeab9><!----><!--[--><!--[--><!----><div class="group" data-v-f8d57d5d><div class="item appearance" data-v-f8d57d5d><p class="label" data-v-f8d57d5d>外观</p><div class="appearance-action" data-v-f8d57d5d><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-f8d57d5d data-v-6862ca98 data-v-1b8b485c><span class="check" data-v-1b8b485c><span class="icon" data-v-1b8b485c><!--[--><span class="vpi-sun sun" data-v-6862ca98></span><span class="vpi-moon moon" data-v-6862ca98></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f8d57d5d><div class="item social-links" data-v-f8d57d5d><div class="vp-social-links social-links-list" data-v-f8d57d5d data-v-feba6c91><!--[--><a class="vp-social-link no-icon" href="https://github.com/onlylovefish/yuzhou-site" aria-label="github" target="_blank" rel="noopener" data-v-feba6c91 data-v-344f47ea><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-c8291bb3 data-v-7ad7fefd><span class="container" data-v-7ad7fefd><span class="top" data-v-7ad7fefd></span><span class="middle" data-v-7ad7fefd></span><span class="bottom" data-v-7ad7fefd></span></span></button></div></div></div></div><div class="divider" data-v-c8291bb3><div class="divider-line" data-v-c8291bb3></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-2cd99c61 data-v-26fe2698><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-26fe2698><span class="vpi-align-left menu-icon" data-v-26fe2698></span><span class="menu-text" data-v-26fe2698>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-26fe2698 data-v-77ed75df><button data-v-77ed75df>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-2cd99c61 data-v-778f4e12><div class="vp-doc-container is-blog" data-v-778f4e12 data-v-0d2ffc47><!--[--><!--]--><div class="container" data-v-0d2ffc47><!----><div class="content" data-v-0d2ffc47><div class="content-container" data-v-0d2ffc47><!--[--><!--]--><main class="main" data-v-0d2ffc47><nav class="vp-breadcrumb" data-v-0d2ffc47 data-v-f5695888><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-f5695888><!--[--><li property="itemListElement" typeof="ListItem" data-v-f5695888><a class="vp-link no-icon link breadcrumb" href="/yuzhou-site/" property="item" typeof="WebPage" data-v-f5695888 data-v-230c3d54><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-f5695888></span><meta property="name" content="首页" data-v-f5695888><meta property="position" content="1" data-v-f5695888></li><li property="itemListElement" typeof="ListItem" data-v-f5695888><a class="vp-link no-icon link breadcrumb" href="/yuzhou-site/blog/" property="item" typeof="WebPage" data-v-f5695888 data-v-230c3d54><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-f5695888></span><meta property="name" content="博客" data-v-f5695888><meta property="position" content="2" data-v-f5695888></li><li property="itemListElement" typeof="ListItem" data-v-f5695888><a class="vp-link no-icon link breadcrumb" href="/yuzhou-site/blog/categories/?id=8c4040" property="item" typeof="WebPage" data-v-f5695888 data-v-230c3d54><!--[-->practice<!--]--><!----></a><span class="vpi-chevron-right" data-v-f5695888></span><meta property="name" content="practice" data-v-f5695888><meta property="position" content="3" data-v-f5695888></li><li property="itemListElement" typeof="ListItem" data-v-f5695888><a class="vp-link no-icon link breadcrumb current" href="/yuzhou-site/article/xjdruyug/" property="item" typeof="WebPage" data-v-f5695888 data-v-230c3d54><!--[-->调试工具-whistle<!--]--><!----></a><!----><meta property="name" content="调试工具-whistle" data-v-f5695888><meta property="position" content="4" data-v-f5695888></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-bac073e1>调试工具-whistle <!----></h1><div class="vp-doc-meta" data-v-bac073e1><!--[--><!--]--><p class="reading-time" data-v-bac073e1><span class="vpi-books icon" data-v-bac073e1></span><span data-v-bac073e1>约 1552 字</span><span data-v-bac073e1>大约 5 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-bac073e1><span class="vpi-clock icon" data-v-bac073e1></span><span data-v-bac073e1>2025-06-22</span></p></div><!--]--><!--[--><!--]--><div class="_article_xjdruyug_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-0d2ffc47><!--[--><!--]--><div data-v-0d2ffc47><p>https://wproxy.org/whistle/</p><p>作为前端，日常本地开发联调或者线上排查问题，都需要查看网络请求，做一些数据mock，或者一些映射等等，尤其是一些移动端场景，比如h5等，本地开发工具，chrome调试缺乏一些功能，没有那么灵活，需要一些代理工具，篡改一些请求，配置等。</p><h2 id="常规代理工具" tabindex="-1"><a class="header-anchor" href="#常规代理工具"><span>常规代理工具</span></a></h2><h3 id="名次解释" tabindex="-1"><a class="header-anchor" href="#名次解释"><span>名次解释</span></a></h3><p>抓包：包指的是网络数据包，包括发送的请求和返回的数据，pc可以通过chrome，但是app抓包不太行 代理：中间角色，在本地调试时不需要经历鉴权，或者其他限制，直接代理请求的url请求，包括请求和返回</p><h3 id="http代理" tabindex="-1"><a class="header-anchor" href="#http代理"><span>http代理</span></a></h3><p>代理是客户端和服务端之间的中转服务，工作原理如下：</p><p>不经过代理请求：客户端和服务端直接建立连接后，即可开始交换数据</p><p>经过代理请求：客户端不与服务端直接建立连接，而是先跟代理建立连接，将目标服务器的地址发送给代理，通过代理再和服务器建立连接，这里如果代理服务为http server，那么就是http代理</p><h2 id="常见代理工具及其特点" tabindex="-1"><a class="header-anchor" href="#常见代理工具及其特点"><span>常见代理工具及其特点</span></a></h2><table><thead><tr><th>工具名称</th><th>平台支持力度</th><th>是否免费</th><th>上手难度</th><th>文档</th><th>是否开源</th><th>主要特点</th></tr></thead><tbody><tr><td>Whistle</td><td>是</td><td>是</td><td>易</td><td>开源、丰富</td><td>是</td><td>界面友好、插件丰富</td></tr><tr><td>Charles</td><td>是</td><td>否</td><td>易</td><td>官方文档</td><td>否</td><td>功能强大、收费</td></tr><tr><td>Fiddler</td><td>是</td><td>是</td><td>一般</td><td>官方文档</td><td>否</td><td>老牌工具、功能全面</td></tr><tr><td>Proxyman</td><td>是（主打Mac）</td><td>否</td><td>易</td><td>官方文档</td><td>否</td><td>界面美观、易用</td></tr></tbody></table><p>根据上面的对比，<a href="https://github.com/avwo/whistle" target="_blank" rel="noopener noreferrer">whistle</a>对于我们来说是个优秀的选择，所以记录下其使用方法，以及一些常见的操作，和笔者日常的实践</p><h2 id="whistle介绍及使用方法" tabindex="-1"><a class="header-anchor" href="#whistle介绍及使用方法"><span>whistle介绍及使用方法</span></a></h2><p>Whistle 是一个基于 Node.js 开发的功能强大、操作简单的跨平台抓包调试工具，支持多种代理模式（如 HTTP 代理、HTTPS 代理、Socks 代理、反向代理等），可用于抓包分析或通过配置规则修改 HTTP、HTTPS、HTTP/2、WebSocket、TCP 等请求。Whistle 还内置了 Weinre、Log、Composer 等工具，支持查看远程页面的 DOM 结构、查看页面 console 输出、重放编辑请求等。此外，Whistle 支持插件扩展，也可单独作为 NPM 包被其他项目引用。</p><blockquote><p>handlebook ：https://wproxy.org/whistle/</p></blockquote><h2 id="使用方式" tabindex="-1"><a class="header-anchor" href="#使用方式"><span>使用方式</span></a></h2><h3 id="安装及启动" tabindex="-1"><a class="header-anchor" href="#安装及启动"><span>安装及启动</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -g</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> whistle</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">w2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="/yuzhou-site/assets/%E5%90%AF%E5%8A%A8bash-Cp2enAp0.png" alt="启动"></p><h3 id="配置代理" tabindex="-1"><a class="header-anchor" href="#配置代理"><span>配置代理</span></a></h3><ol><li><p>全局代理，这种就是本机发出的所有请求都走代理，通过命令 w2 proxy或者手动配置 Mac: System Preferences &gt; Network &gt; Advanced &gt; Proxies &gt; HTTP or HTTPS <img src="/yuzhou-site/assets/%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86-DUaE7gCd.png" alt="全局代理"></p></li><li><p>浏览器代理，安装浏览器代理插件</p></li></ol><p>安装Chrome代理插件：推荐安装SwitchyOmega <img src="/yuzhou-site/assets/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%86-BWNJdTIz.png" alt="浏览器代理"></p><p>Firefox: 地址栏输入访问 about:preferences，找到 Network Proxy，选择 手动代理配置(Manual proxy configuration)，输入代理服务器地址、端口，保存</p><p><img src="/yuzhou-site/assets/firefox1-DBobie93.png" alt="alt text"><img src="/yuzhou-site/assets/firefox2-BVtJpWFP.png" alt="alt text"></p><ol start="3"><li>移动端代理 <img src="/yuzhou-site/assets/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BB%A3%E7%90%86-je3s_Hyc.png" alt="移动端代理"></li></ol><p>安装证书 安装本机默认 Whistle 实例的证书：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">w2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ca</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>随后即可看到对应的抓包信息了 <img src="/yuzhou-site/assets/%E6%8A%93%E5%8C%85%E4%BF%A1%E6%81%AF-BtwhCAL-.png" alt="alt text"></p><p>特别说明，因为ios模拟器无法扫码，所以模拟器的安装方式如下</p><p>设置全局代理后，safari地址栏输入rootca.pro，按照提示安装证书（ios安装根证书需要连接远程服务器进行验证，需要暂时把https拦截功能关掉</p><p>Settings-&gt;General-&gt;Device Management-&gt;安装刚刚下载的证书</p><p>手动信任自定义根证书，设置路径：setting-&gt;general-&gt;About-&gt;&gt;certificate trust testings</p><p>真机可以通过扫码安装证书 <img src="/yuzhou-site/assets/%E5%AE%89%E8%A3%85%E8%AF%81%E4%B9%A6-CyvvwzX0.png" alt="alt text"></p><h2 id="配置与匹配" tabindex="-1"><a class="header-anchor" href="#配置与匹配"><span>配置与匹配</span></a></h2><p>whistle操作均可通过配置实现，配置方式扩展于系统hosts配置方式，有丰富的匹配模式及更灵活的配置方式</p><h2 id="配置方式" tabindex="-1"><a class="header-anchor" href="#配置方式"><span><a href="https://wproxy.org/whistle/mode.html" target="_blank" rel="noopener noreferrer">配置方式</a></span></a></h2><p>whistle将请求url与pattern匹配，如果婆培到就执行operatorURL对应的操作</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pattern</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ooperatorURI</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="匹配规则" tabindex="-1"><a class="header-anchor" href="#匹配规则"><span><a href="https://wproxy.org/whistle/principle.html" target="_blank" rel="noopener noreferrer">匹配规则</a></span></a></h2><p>whistle的匹配模式大体可以分为域名、路径、正则、精确匹配、通配符匹配,更多的可以查看whistle的handbook介绍</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">www.test.com</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:9999</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> www.test.com/xxx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:8080</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用功能" tabindex="-1"><a class="header-anchor" href="#常用功能"><span>常用功能</span></a></h2><p><strong>1. host转发</strong> 相当于浏览器的host文件，如果找不到再去查找本机的host文件，whistle除了传统的host配置，还支持子路径和端口的host转发配置，配置方式：Rules-&gt;create-&gt;host <img src="/yuzhou-site/assets/host%E8%BD%AC%E5%8F%91-CkvU8acb.png" alt="alt text"></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">https://data.cma.cn/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://wproxy.org/whistle/frequet.html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 域名映射</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">https://data.cma.cn/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://wproxy.org/whistle/frequet.html:8080</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 端口映射</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">https://data.cma.cn/api</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://wproxy.org/whistle/frequet.html:8080</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 路径匹配</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.本地替换</strong></p><p>把响应内容替换为本地文件内容</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">data.cma.cn/kbweb/home/getStationID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file:///Users/yuanlu/workspace/waterHome/yuzhou-site/docs/practice/test/test.json</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="/yuzhou-site/assets/%E6%9C%AC%E5%9C%B0%E6%9B%BF%E6%8D%A2-DZVWeelM.png" alt="alt text"></p><p><strong>3.修改请求和返回</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">data.cma.cn/kbweb/home/getStationID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> resBody://{test.json}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="/yuzhou-site/assets/whistle%E4%B8%8A%E9%85%8D%E7%BD%AE%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC-DKkXGd8B.png" alt="alt text"><img src="/yuzhou-site/assets/%E4%BB%A3%E7%90%86%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E9%85%8D%E7%BD%AE-C7FkepgV.png" alt="alt text"></p><p><strong>4. js注入</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">https://data.cma.cn/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jsAppend:///Users/yuanlu/workspace/waterHome/yuzhou-site/docs/practice/test/jsAppend.js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="/yuzhou-site/assets/whistle%E6%8F%92%E5%85%A5js-D2GxrN8b.png" alt="alt text"></p><p><strong>5. html注入</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">data.cma.cn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> htmlAppend://{test.html}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="/yuzhou-site/assets/%E6%B3%A8%E5%85%A5%E5%86%85%E5%AE%B9-BtzEeS32.png" alt="alt text"><img src="/yuzhou-site/assets/html%E6%B3%A8%E5%85%A5-53ZNI4-W.png" alt="alt text"></p><h2 id="插件" tabindex="-1"><a class="header-anchor" href="#插件"><span>插件</span></a></h2><h3 id="whistle-inspect" tabindex="-1"><a class="header-anchor" href="#whistle-inspect"><span>whistle inspect</span></a></h3><p>用于往页面中插入vconsole.可以看到一些调试的console信息</p><h3 id="whistle-script" tabindex="-1"><a class="header-anchor" href="#whistle-script"><span>whistle.script</span></a></h3><p>script.js 是你本地的 JS 文件，里面可以写自定义逻辑。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">data.cma.cn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> whistle.script://path/to/your/script.js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// script.js</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">req</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">includes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/api/test</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> JSON</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stringify</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">({</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> msg</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mock data</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> });</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="whistle-weinre" tabindex="-1"><a class="header-anchor" href="#whistle-weinre"><span>whistle weinre</span></a></h3><p>data.cma.cn weinre://</p><h2 id="利用whistle查看页面日志" tabindex="-1"><a class="header-anchor" href="#利用whistle查看页面日志"><span>利用whistle查看页面日志</span></a></h2><p>利用whistle注入vconsole等h5调试插件</p><ol><li><p>手机安装whistle的证书，然后信任即可，即可在whistle中抓到手机访问的请求 <img src="/yuzhou-site/assets/%E5%AE%89%E8%A3%85%E8%AF%81%E4%B9%A6-CyvvwzX0.png" alt="安装证书"></p></li><li><p>手机扫码安装证书，在浏览器中输入rootca <img src="/yuzhou-site/assets/rootca-DgF6iJHF.PNG" alt="rootca"></p></li><li><p>在手机（ios）设置-&gt;关于手机-&gt;证书信任设置-&gt;信任whistle的证书 <img src="/yuzhou-site/assets/%E7%9C%9F%E6%9C%BA%E6%8A%93%E5%8F%96%E5%8C%85-DWvg3FrK.png" alt="alt text"></p></li></ol><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>除了本文的代理调试，还有云真机，安卓真机插线调试，不插线调试，全链路mock测试等等</p><p>实际工作中需要结合实际，搭配使用</p></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-0d2ffc47 data-v-ac33042a><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-ac33042a><span class="contributors-label" data-v-ac33042a>贡献者: </span><span class="contributors-info" data-v-ac33042a><!--[--><!--[--><span class="contributor" data-v-ac33042a>onlylovefish</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-ac33042a><div class="pager" data-v-ac33042a><a class="vp-link no-icon link pager-link prev" href="/yuzhou-site/article/4cvqp8dr/" data-v-ac33042a data-v-230c3d54><!--[--><span class="desc" data-v-ac33042a>上一页</span><span class="title" data-v-ac33042a>树相关问题🌲</span><!--]--><!----></a></div><div class="pager" data-v-ac33042a><a class="vp-link no-icon link pager-link next" href="/yuzhou-site/article/ohh1otyc/" data-v-ac33042a data-v-230c3d54><!--[--><span class="desc" data-v-ac33042a>下一页</span><span class="title" data-v-ac33042a>rn跨端小程序实践</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-2cd99c61 data-v-c8556b97><span class="percent" data-allow-mismatch data-v-c8556b97>0%</span><span class="show icon vpi-back-to-top" data-v-c8556b97></span><svg aria-hidden="true" data-v-c8556b97><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-c8556b97></circle></svg></button><footer class="vp-footer" vp-footer data-v-2cd99c61 data-v-74c19f57><!--[--><div class="container" data-v-74c19f57><p class="message" data-v-74c19f57>渔舟 2025</p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/yuzhou-site/assets/app-Bg3bfEUT.js" defer></script></body></html>